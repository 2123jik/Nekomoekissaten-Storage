[Script Info]
Title: Luminous_OP_EFFECT
ScriptType: v4.00+
WrapStyle: 0
ScaledBorderAndShadow: yes
YCbCr Matrix: TV.709
PlayResX: 1920
PlayResY: 1080

[V4+ Styles]
Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding
Style: ED-JP,FOT-Humming ProN D,71,&H00FFFFFF,&H000000FF,&H00FFFFFF,&H00000000,0,0,0,0,100,100,5,0,1,0,0,2,20,20,35,1

[Events]
Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text
Comment: 0,0:00:05.76,0:00:07.26,Default,AutoTags,0,0,0,code once,function AutoTags(Intervalo,Dato1,Dato2,Doto3,Pause,st,et)    st = st or 0 et = et or line.duration Pause = Pause or 0           local tags=""           local SUERTE = 0           local CONTADOR = 0           local ARREGLO = {Dato1,Dato2}           local count = math.ceil((et-st)/(Intervalo+Pause))           for i = 1, count do               CONTADOR = i               if Dato1 and Dato2 then                   if CONTADOR%2 ==0 then                       SUERTE = ARREGLO[1]                   else                       SUERTE = ARREGLO[2]                   end               end               if Doto3                   then              tags = tags .."\\t(" ..st+(i-1)*(Intervalo+Pause).. "," ..(i~=count and st+i*Intervalo+Pause*(i-1) or et) .. ",\\" ..(i~=count and SUERTE or Doto3)..")"..""                   else              tags = tags .."\\t(" ..st+(i-1)*(Intervalo+Pause).. "," ..st+i*Intervalo+Pause*(i-1).. ",\\" ..SUERTE..")"..""                end          end           return tags       end
Comment: 0,0:00:00.00,0:00:05.00,Default,循环嵌套定义,0,0,0,code once,function multiloop(tbl,multi)         local function loop_no(tbl)                          local loop={}                          local sum=0                          for i=1,#tbl                           do                              sum=sum+tbl[i]                                     for  t=1,tbl[i]                                            do                                               loop[#loop+1]={j1=t,j2=i,maxj1=tbl[i],maxj2=#tbl}                                               end                                        end                         return loop,sum                 end                  if _G.type(tbl)=="number"  and  _G.type(multi)=="number"                     then                       maxloop(tbl)                         maxj1=tbl/multi                     maxj2=multi                     j1=math.fmod(j-1,maxj1)+1                     j2=math.floor((j-1)/maxj1)+1             elseif  _G.type(tbl)=="table"                   then                       local new_tbl={}                         for i=1,#tbl                            do                             if  tbl[i]>0                              then                             new_tbl[#new_tbl+1]=tbl[i]                          end                          if  j==1                                    then                                        loop,max=loop_no(new_tbl)                          end                                       maxloop(max)                               j1=loop[j].j1                                j2=loop[j].j2                                 maxj1=loop[j].maxj1                                 maxj2=loop[j].maxj2                            end                            else                            _G.error("tbl for loop have to be a number or a table value:输入的循环参数必须是一个数值或者一个表" , 2)                           end                   return ""               end
Comment: 0,0:00:00.00,0:00:05.00,Default,音节顺序重置1外-内 2内-外,0,0,0,code syl noblank all,function resyl(mode)  local mi=0 if mode==1          then        if line.kara.n%2~=0            then                if syl.i>math.ceil(line.kara.n/2)                    then                        mi=line.kara.n-syl.i+1                   else                       mi=syl.i                   end     elseif line.kara.n%2==0        then           if syl.i>line.kara.n/2               then                   mi=line.kara.n-syl.i+1               else                   mi=syl.i               end           end       elseif mode==2          then                if line.kara.n%2~=0                   then                       if syl.i<line.kara.n/2                           then                       mi=math.ceil(line.kara.n/2)-syl.i+1                          else                        mi=syl.i-math.ceil(line.kara.n/2)+1                       end               elseif line.kara.n%2==0                   then                       if syl.i<=line.kara.n/2                           then                          mi=line.kara.n/2-syl.i+1                     else                       mi=syl.i-line.kara.n/2                  end                    end             end                 return mi         end
Comment: 0,0:01:39.70,0:01:41.70,Default,随机,0,0,0,code syl noblank all,function ranex(tbl)  return (math.random(0.5,1)-1)*2*math.random(tbl[1],tbl[2]) end
Comment: 0,0:00:00.00,0:00:00.00,Default,分辨率,0,0,0,code once,sc=math.ceil(_G.aegisub.video_size()/38)  ms=33
Comment: 0,0:00:00.00,0:00:05.00,Default,翅膀,0,0,0,code once,wings="m 15 -3 b 32 -3 50 -6 50 -24 b 50 -43 80 -51 98 -53 b 122 -56 145 -60 169 -61 b 174 -61 177 -60 177 -58 b 177 -55 167 -48 161 -47 b 144 -45 126 -41 109 -38 l 109 -36 b 126 -38 143 -43 159 -45 b 165 -45 173 -46 176 -44 b 172 -36 161 -32 151 -32 b 132 -31 114 -28 95 -29 l 95 -27 b 112 -26 128 -28 144 -29 l 163 -29 b 158 -20 143 -18 130 -19 l 89 -19 l 89 -17 l 135 -17 l 144 -11 b 143 -8 112 -8 98 -8 b 90 -8 84 -9 79 -10 l 78 -9 b 87 -4 99 -7 110 -5 l 117 -1 b 107 6 82 2 68 -4 l 67 -2 b 75 2 84 2 92 5 l 100 9 b 85 13 69 8 55 -1 l 54 1 b 62 7 69 8 77 11 l 81 15 b 68 19 55 10 44 4 l 42 5 b 49 10 55 14 62 16 l 64 19 b 54 20 48 14 40 9 l 38 10 b 43 15 47 16 53 19 b 48 25 36 20 31 11 l 29 12 b 32 17 40 24 49 24 b 55 37 76 60 91 66 b 92 77 81 74 75 72 b 64 67 51 48 46 34 l 44 34 b 49 49 62 67 70 70 b 68 85 58 81 50 77 b 42 73 40 43 38 35 l 37 35 b 35 50 42 70 46 76 b 44 81 34 84 28 79 b 21 73 21 57 21 45 b 27 45 29 35 29 29 l 27 29 b 27 38 24 44 18 44 b 15 44 11 40 13 37 b 19 27 17 14 15 6 b 15 2 11 -3 15 -3 m 177 -61 b 225 -65 306 -74 315 -92 b 327 -84 329 -71 310 -63 b 297 -58 214 -50 168 -47 b 174 -51 184 -57 177 -61 m 178 -45 b 217 -48 257 -53 296 -58 l 314 -57 b 313 -53 298 -44 289 -42 b 247 -37 205 -34 165 -33 b 172 -36 177 -39 178 -45 m 166 -30 b 206 -33 245 -35 285 -39 l 294 -36 b 291 -31 282 -26 273 -24 b 232 -21 192 -19 151 -19 b 159 -21 165 -24 166 -30 m 142 -16 b 183 -18 224 -19 266 -21 b 271 -15 261 -7 248 -6 b 205 -5 161 -5 121 -6 b 137 -8 155 -5 142 -16 m 118 -4 b 156 -2 194 -3 232 -3 b 239 7 221 12 211 12 b 175 13 141 8 106 5 b 111 4 124 1 118 -4 m 100 6 b 132 11 166 13 199 14 b 201 17 201 21 196 23 b 188 25 180 27 171 26 b 146 24 120 19 96 12 b 105 12 103 8 100 6 m 82 12 l 92 12 b 109 21 137 23 159 27 b 160 36 140 37 129 35 b 109 32 92 25 77 18 b 83 18 84 16 82 12 m 66 17 l 73 18 b 87 27 104 30 119 36 b 124 44 120 48 105 48 b 86 42 69 30 56 20 b 63 22 66 22 66 17 m 54 22 b 70 34 87 42 104 49 b 108 57 111 68 94 65 b 75 59 62 39 52 24 "
Comment: 0,0:01:12.96,0:01:13.01,Default,颜色定义,0,0,0,code once,  ct1="&H05D6EF&"  ct2="&H95C90E&"   ct3="&H01ADFF&"  ct4="&HCF59F7&"         color_all={ct1,ct2,ct3,ct4}    cb="&HFFFFFF&"
Comment: 0,0:00:05.47,0:00:05.47,Default,,0,0,0,code once,hoshi="m 13 -2 l 90 0 l 13 2 m 2 13 l 0 90 l -2 13 m -13 2 l -90 0 l -13 -2 m -2 -13 l 0 -90 l 2 -13 m -15 0 b -15 -8 -8 -15 0 -15 b 8 -15 15 -8 15 0 b 15 8 8 15 0 15 b -8 15 -15 8 -15 0"  star="m 0 -20 l -7 -8 l -22 -5 l -12 6 l -14 21 l 0 15 l 14 21 l 12 6 l 21 -5 l 7 -8 l 0 -20 "
Comment: 0,0:01:13.01,0:01:13.01,Default,,0,0,0,code once,function  round(x0,y0,R)      local a=4*R*(math.sqrt(2)-1)/3  	return string.format("m %d %d b %d %d %d %d %d %d b %d %d %d %d %d %d b %d %d %d %d %d %d b %d %d %d %d %d %d",x0-R,y0,x0-R,y0-a,x0-a,y0-R,x0,y0-R,x0+a,y0-R,x0+R,y0-a,x0+R,y0,x0+R,y0+a,x0+a,y0+R,x0,y0+R,x0-a,y0+R,x0-R,y0+a,x0-R,y0)  end
Comment: 0,0:01:13.01,0:01:14.72,Default,特效群A,0,0,0,code syl noblank all,fxgroup.A=(line.actor=="A")    fxgroup.AV=(line.actor=="A" and syl.i==1)    cta=_G.interpolate_color((syl.i-1)/line.kara.n,color_all[1],color_all[2])
Comment: 2,0:01:14.72,0:01:14.72,Default,文字,0,0,0,template syl noblank fxgroup A all,!maxloop(2)!!retime("syl2end",-$sdur,0)!{\fad(50,300)\fscx30\fscy30\t(0,150,0.8,\fscx115\fscy115\t(150,300,1.2,\fscx90\fscy90\t(300,450,0.8,\fscx105\fscy105\t(450,600,1.2,\fscx100\fscy100))))\1a!_G.ass_alpha(j==1 and 255 or 0)!\an5\pos($scenter,$smiddle)\bord3\blur!j==1 and 6 or 1!\1c!cta!\3c!j==2 and  cb  or  cta!}
Comment: 0,0:00:15.82,0:00:15.87,Default,星光,0,0,0,template syl noblank notext fxgroup A all,!maxloop(2)!!retime("presyl",remember("t",math.random(-150,300)),recall.t+math.random(500,800))!{\fad(50,50)!AutoTags(ms*2,"fscx120\\fscy120","fscx30\\fscy30",false,0,-math.random(3000),line.duration)!\an7\move(!remember("x",math.random($sleft,$sright))!,!remember("y",$smiddle+math.random(-sc*0.4,sc*0.4))!,!recall.x+ranex({sc*0.3,sc*0.6})!,!recall.y+ranex({sc*0.5,sc*0.8})!)\bord0.5\blur3\1c!color_all[remember("c",math.random(1,2))]!\3c!color_all[recall.c]!\frz!math.random(360)!\p1}!math.random(100)>50 and "m 0 -6 b -1 -3 -3 -1 -6 0 b -3 1 -1 3 0 6 b 1 3 3 1 6 0 b 3 -1 1 -3 0 -6" or "m -6 0 b -6 -3 -3 -6 0 -6 b 3 -6 6 -3 6 0 b 6 3 3 6 0 6 b -3 6 -6 3 -6 0"!
Comment: 0,0:01:14.72,0:01:14.72,Default,,0,0,0,,
Comment: 0,0:01:13.01,0:01:14.72,Default,特效群B,0,0,0,code syl noblank all,fxgroup.B=(line.actor=="B")    fxgroup.BV=(line.actor=="B" and syl.i==1)    ctb=_G.interpolate_color((syl.i-1)/line.kara.n,color_all[3],color_all[4])
Comment: 2,0:01:14.72,0:01:14.72,Default,文字,0,0,0,template syl noblank fxgroup B all,!maxloop(2)!!retime("line",(resyl(1)-1)/$syln*800,0)!{\fad(300,300)\1a!_G.ass_alpha(j==1 and 255 or 0)!\an5\pos($scenter,$smiddle)\bord3\blur!j==1 and 6 or 1!\1c!ctb!\3c!j==2 and  cb  or  ctb!}
Comment: 2,0:00:36.80,0:00:36.84,Default,星星,0,0,0,template syl noblank notext fxgroup BV all,!multiloop(2*2,2)!!retime("line",0,0)!{\fscx!sc*1.8!\fscy!sc*1.8!\fad(300,300)\1a!_G.ass_alpha(j==1 and 255 or 0)!\an7\pos(!j2==1 and $lleft-sc*0.2  or $lright+sc*0.2!,!j2==1 and $ltop-sc*0.1  or $lbottom+sc*0.1!)\bord2\blur!j1==1 and 4 or 1!\1c!color_all[j2==1 and 3  or 4]!\3c!j1==2 and  cb  or  color_all[j2==1 and 3  or 4]!\p2\frz!-45*math.pow(-1,j2)!}!star!
Comment: 0,0:00:35.72,0:00:35.76,Default,横线,0,0,0,template syl noblank notext fxgroup BV all,!multiloop(math.ceil($lwidth*0.25)*2,2)!!retime("line",j1/maxj1*600,0)!{\fad(300,300)\an7\pos(!j2== 1 and $lleft+(j1-1)/maxj1*$lwidth*0.25-sc*0.1  or  $lright-(j1-1)/maxj1*$lwidth*0.25!,!j2==1 and $ltop-sc*0.09  or $lbottom+sc*0.05!)\1c!color_all[j2==1 and 3  or 4]!\fscy!sc*2.2!\p1}m -1 -1 l 1 -1 l 1 1 l -1 1
Comment: 0,0:00:39.64,0:00:39.68,Default,竖线,0,0,0,template syl noblank notext fxgroup BV all,!multiloop(math.ceil($lheight*0.9)*2,2)!!retime("line",j1/maxj1*600,0)!{\fad(300,300)\an7\pos(!j2==1 and $lleft-sc*0.15-sc*0.1 or $lright+sc*0.2!,!j2== 1 and $ltop+(j1-1)/maxj1*$lheight*0.9  or  $lbottom-(j1-1)/maxj1*$lheight*0.9!)\1c!color_all[j2==1 and 3  or 4]!\fscy!sc*2.2!\p1}m -1 -1 l 1 -1 l 1 1 l -1 1
Comment: 0,0:00:46.23,0:00:46.27,Default,,0,0,0,,
Comment: 0,0:01:13.01,0:01:14.72,Default,特效M,0,0,0,code syl noblank all,fxgroup.M=(line.actor=="M")   fxgroup.MS=(line.actor=="MS")   fxgroup.MV=(line.actor=="M" and syl.i==1)
Comment: 1,0:00:05.47,0:00:05.47,Default,文字,0,0,0,template syl noblank fxgroup M all,!maxloop(2)!!retime("syl2end",-$sdur-200,0)!{\fad(50,300)\an5\pos(!$scenter!,$smiddle)\org(!$scenter+10000*math.pow(-1,$si)!,!$smiddle!)\frz0\t(!line.duration-300!,!line.duration!,2,\frz-0.4)\fscx30\fscy30\t(0,200,0.8,\fscx110\fscy110\t(200,400,1.2,\fscx100\fscy100))!j==1 and "\\bord3\\blur6" or "\\bord3\\blur1"!\1c!ctb!\3c!j==1 and ctb or cb!\1a!j==1 and "&HFF&" or "&H00&"!}
Comment: 0,0:00:43.64,0:00:43.68,Default,星星扩大,0,0,0,template syl noblank notext fxgroup M all,!retime("presyl",-200,400)!{\fad(50,300)\frz0\fscx!sc*0.7!\fscy!sc*0.7!\t(0,!line.duration!,0.7,\frz120\fscx!sc*2.1!\fscy!sc*2.1!)\an7\pos(!$scenter-sc*0.1!,$lmiddle)\1c!cb!\3c!ctb!\bord3\blur6\p1}m 0 -50 l -16 -22 l -48 -15 l -26 8 l -29 40 l 0 27 l 29 40 l 26 8 l 48 -15 l 16 -22 m 17 -24 l 52 -16 l 28 9 l 31 43 l 0 29 l -31 43 l -28 9 l -52 -16 l -17 -24 l 0 -54
Comment: 1,0:00:05.47,0:00:05.47,Default,文字,0,0,0,template syl noblank fxgroup MS all,!maxloop(2)!!retime("line",($si-1)/$syln*300,0)!{\fad(50,300)\an5\pos(!$scenter!,!$smiddle-sc*2!)\fscx50\fscy50\t(0,200,0.8,\fscx110\fscy110\t(200,400,1.2,\fscx100\fscy100))!j==1 and "\\bord3\\blur6" or "\\bord3\\blur1"!\1c!ctb!\3c!j==1 and ctb or cb!\1a!j==1 and "&HFF&" or "&H00&"!}
Comment: 0,0:01:26.56,0:01:26.56,Default,,0,0,0,,
Comment: 0,0:01:13.01,0:01:14.72,Default,特效群C,0,0,0,code syl noblank all,fxgroup.C=(line.actor=="C")    fxgroup.CV=(line.actor=="C" and syl.i==1)
Comment: 2,0:01:14.72,0:01:14.72,Default,文字,0,0,0,template syl noblank fxgroup C all,!maxloop(2)!!retime("line",(resyl(1)-1)/$syln*800,0)!{\fscx30\fscy30\t(0,150,0.8,\fscx115\fscy115\t(150,300,1.2,\fscx90\fscy90\t(300,450,0.8,\fscx105\fscy105\t(450,600,1.2,\fscx100\fscy100))))\fad(50,300)\1a!_G.ass_alpha(j==1 and 255 or 0)!\an2\pos($scenter,$sbottom)\bord3\blur!j==1 and 6 or 1!\1c!ctb!\3c!j==2 and  cb  or  ctb!}
Comment: 2,0:01:00.79,0:01:00.83,Default,翅膀,0,0,0,template syl noblank notext fxgroup CV all,!multiloop(2*2,2)!{\fscx!sc*0.5!\fscy!sc*0.5!\frz-50\t(0,300,0.8,\fscx!sc*1.9!\fscy!sc*1.9!\frz20\t(300,500,1.2,\frz0\fscx!sc*1.7!\fscy!sc*1.7!))\fry!j2==1 and 180 or 0!\fad(50,300)\1a!_G.ass_alpha(j1==1 and 255 or 0)!\an7\pos(!j2==1 and $lleft-sc*0.3  or   $lright+sc*0.3!,!$lmiddle!)\bord3\blur!j1==1 and 6 or 1!\1c!color_all[j2== 1 and  3 or 4]!\3c!j1==2 and  cb  or  color_all[j2== 1 and  3 or 4]!\p2}!wings!
Comment: 2,0:01:14.13,0:01:14.17,Default,星星,0,0,0,template syl noblank notext fxgroup CV all,!multiloop(2*3,3)!!retime("line",(j2-1)/maxj*500+300,0)!{\fad(300,300)\1a!_G.ass_alpha(j1==1 and 255 or 0)!\an7\pos(!j2==1 and $lleft-sc*1.5 or (j2==2 and  $lleft-sc*2.3 or $lleft-sc*3)!,!$lmiddle+(j2==1 and sc*0.8 or (j2==2 and sc*0.5 or sc*0.15))!)\bord2\blur!j1==1 and 4 or 1!\fscx!remember("sc",j2==1 and sc*2.6 or (j2==2 and sc*2.1 or sc*1.5))-sc!\fscy!recall.sc-sc!\t(0,500,0.6,\fscx!recall.sc!\fscy!recall.sc!)\p2\1c!color_all[3]!\3c!j1==2 and cb or color_all[3]!}!star!
Comment: 2,0:01:28.19,0:01:28.23,Default,星星,0,0,0,template syl noblank notext fxgroup CV all,!multiloop(2*3,3)!!retime("line",(j2-1)/maxj*500+300,0)!{\fad(300,300)\1a!_G.ass_alpha(j1==1 and 255 or 0)!\an7\pos(!j2==1 and $lright+sc*1.5 or (j2==2 and  $lright+sc*2.3 or $lright+sc*3)!,!$lmiddle+(j2==1 and sc*0.8 or (j2==2 and sc*0.5 or sc*0.15))!)\bord2\blur!j1==1 and 4 or 1!\fscx!remember("sc",j2==1 and sc*2.6 or (j2==2 and sc*2.1 or sc*1.5))-sc!\fscy!recall.sc-sc!\t(0,500,0.6,\fscx!recall.sc!\fscy!recall.sc!)\p2\1c!color_all[4]!\3c!j1==2 and cb or color_all[4]!}!star!
Comment: 0,0:01:00.83,0:01:02.32,Default,底部横线,0,0,0,template syl noblank notext fxgroup CV all,!maxloop(math.ceil($lwidth))!{\fad(300,300)\an7\pos(!$lleft+(j-1)/maxj*$lwidth!,!$lbottom+sc*0.1!)\fscy!sc*2!\bord0\1c!_G.interpolate_color(j/maxj,color_all[3],color_all[4])!\p1}m -1 -1 l 1 -1 l 1 1 l -1 1
Comment: 0,0:01:03.87,0:01:03.91,Default,底部横线,0,0,0,template syl noblank notext fxgroup CV all,!maxloop(math.ceil($lwidth+sc*1.5))!{\fad(300,300)\an7\pos(!$lleft+(j-1)/maxj*($lwidth+sc*1.5)-sc*0.75!,!$lbottom+sc*0.3!)\fscy!sc*5!\bord0\1c!_G.interpolate_color(j/maxj,color_all[3],color_all[4])!\p1}m -1 -1 l 1 -1 l 1 1 l -1 1
Comment: 0,0:02:31.90,0:02:31.94,Default,星光,0,0,0,template syl noblank notext fxgroup CV all,!maxloop(math.ceil($lwidth/3))!!retime("abs",remember("t",math.random($lstart,$lend)),recall.t+math.random(800,1200))!{!math.random(100)>50 and AutoTags(600,"\\alpha&H20&","\\alpha&HFF&",false,0,-math.random(3000),line.duration)  or ""!\fad(150,300)\an7\move(!remember("x",$lleft-0.5*sc+(j-1)/maxj*($lwidth+sc))!,!remember("y",$sbottom+math.random(sc*0.1))!,!recall.x+math.random(-sc*0.1,sc*0.1)!,!recall.y-math.random(sc*0.6,sc*2.5)!)\1c!cb!\3c!_G.interpolate_color(j/maxj,color_all[3],color_all[4])!\bord3\blur6\fscx!sc*2.2!\fscy!sc*2.2!\p4}!math.random(100)>25 and round(0,0,math.random(8,18)) or hoshi!
